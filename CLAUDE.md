# Claude Code 使用ルール

## MCP（Model Context Protocol）の使用

このプロジェクトでは、必要に応じてMCPサーバーを使用してください。

### 設定済みのMCPサーバー

- **serena**: IDE支援ツール
  - プロジェクトのコンテキストに応じた支援を提供
  - 必要に応じて活用してください

### 使用方針

- コード分析、リファクタリング、ドキュメント生成など、タスクに応じてMCPツールを活用する
- プロジェクトの品質向上に役立つ場合は積極的にMCPを使用する
- 必要性が不明な場合は、使用前に確認する

## 関連プロジェクト

本プロジェクトは、以下のプロジェクトで実施済みの内容を前提としています。

### サーボモーター制御の基礎

- **プロジェクト**: [08-002-rpi-servo-multi-control](https://github.com/Murasan201/08-002-rpi-servo-multi-control)
- **実施済み内容**:
  - サーボモーター動作範囲確認プログラム (`servo_range_test.py`)
  - サーボモーター初期位置設定
  - PWM制御によるサーボモーター制御の基本

本プロジェクトでは、上記の知識を前提として、パン・チルト機構とAI物体検出を組み合わせた追跡カメラシステムを構築します。

## プロジェクト構造

### ドキュメント管理

- **ドキュメントの保存場所**: `docs/` ディレクトリ
- すべてのプロジェクトドキュメント、設計書、手順書、メモなどは `docs/` ディレクトリ内に保存してください
- ドキュメントファイルは適切な名前を付けて整理すること
- 必要に応じてサブディレクトリを作成して分類すること

## 開発方針

### 原稿コードの取り扱い

- **基本方針**: 原稿（`chapter12_manuscript.md`）に記載されているソースコードは、**そのまま使用**してください
- **コード改変の禁止**: 動作確認前に原稿のコードを勝手に修正・改善しないこと
- **修正が必要な場合**:
  1. まず原稿のコードをそのまま実装する
  2. 本プロジェクトで実機動作確認を行う
  3. 動作確認後、修正が必要な箇所のみを特定する
  4. 修正内容を原稿に反映する
- **目的**: このプロジェクトは書籍原稿の技術検証を目的としているため、原稿の正確性を確保することが最優先

## Git操作とセキュリティ

### 機密情報の管理

**重要**: gitにコミット・プッシュする前に、必ず機密情報が含まれていないか入念にチェックすること

#### チェック項目
1. **原稿ファイル**: `chapter12_manuscript.md` が `.gitignore` に含まれているか確認
2. **個人情報**: コード内に個人情報（名前、メールアドレス、パスワード等）が含まれていないか
3. **APIキー・トークン**: 認証情報やAPIキーが含まれていないか
4. **実験データ**: 個人を特定できる画像や動画が含まれていないか
5. **設定ファイル**: ローカル固有の設定が含まれていないか

#### コミット前の確認手順
```bash
# 1. git statusでステージングされているファイルを確認
git status

# 2. 各ファイルの内容を確認
git diff --cached

# 3. .gitignoreが正しく機能しているか確認
git check-ignore -v chapter12_manuscript.md

# 4. 問題なければコミット
git commit -m "コミットメッセージ"
```

#### 除外すべきファイル（.gitignoreに記載）
- 原稿ファイル（`chapter12_manuscript.md`）
- 実験データ（画像、動画、ログファイル等）
- 個人情報を含むファイル
- ローカル固有の設定ファイル
